<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新歓 局適性診断 Pro</title>
    <style>
        :root {
            --agree-color: #00b894;
            --disagree-color: #a29bfe;
            --neutral-color: #dfe6e9;
            --primary-blue: #0984e3;
            --bg-gradient: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
        }

        body {
            font-family: 'Helvetica Neue', Arial, "Hiragino Sans", "Meiryo", sans-serif;
            background: var(--bg-gradient);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #2d3436;
        }

        .container {
            max-width: 500px;
            width: 90%;
            background: white;
            padding: 40px 30px;
            border-radius: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            text-align: center;
            border: 4px solid #fff;
        }

        /* アニメーション */
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        h1 { font-size: 1.8rem; margin-bottom: 1rem; color: #2c3e50; }
        
        #start-area h1 {
            font-size: 2.2rem;
            background: -webkit-linear-gradient(#0984e3, #6c5ce7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .description { font-size: 1rem; color: #636e72; line-height: 1.6; margin-bottom: 2rem; }

        /* クイズ部分 */
        .progress { color: #b2bec3; font-weight: bold; margin-bottom: 20px; }
        h2 { font-size: 1.3rem; min-height: 3.5rem; display: flex; align-items: center; justify-content: center; }

        .scale-container { display: flex; justify-content: space-between; align-items: center; margin: 30px 0; }
        .scale-label { font-size: 0.8rem; font-weight: bold; width: 60px; }
        .scale-label.agree { color: var(--agree-color); }
        .scale-label.disagree { color: var(--disagree-color); }

        .circle-btn {
            border: 3px solid #ddd; border-radius: 50%; background: white; cursor: pointer; transition: 0.2s; padding: 0; outline: none;
        }
        .btn-xl { width: 60px; height: 60px; border-color: var(--agree-color); }
        .btn-l  { width: 48px; height: 48px; border-color: var(--agree-color); opacity: 0.6; }
        .btn-m  { width: 38px; height: 38px; border-color: var(--neutral-color); }
        .btn-s  { width: 48px; height: 48px; border-color: var(--disagree-color); opacity: 0.6; }
        .btn-xs { width: 60px; height: 60px; border-color: var(--disagree-color); }

        .circle-btn:active { transform: scale(0.9); }
        .circle-btn:hover { background: #f1f2f6; }

        /* 結果画面 */
        #result-name {
            font-size: 2.8rem;
            font-weight: bold;
            margin: 20px 0;
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .action-btn {
            background: var(--primary-blue); color: white; border: none; padding: 16px 40px;
            border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer;
            transition: 0.3s; width: 100%; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.15); }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div id="start-area">
        <h1>局適性診断</h1>
        <p class="description">
            あなたにぴったりの役割はどこ？<br>
            簡単な質問に答えるだけで、活動の相性を判定します。
        </p>
        <button class="action-btn" onclick="startQuiz()">診断をスタートする</button>
    </div>

    <div id="quiz-area" class="hidden">
        <div class="progress" id="progress"></div>
        <div class="question-block">
            <h2 id="question-text"></h2>
            <div class="scale-container">
                <span class="scale-label agree">同意する</span>
                <button class="circle-btn btn-xl" onclick="answer(1.0)"></button>
                <button class="circle-btn btn-l"  onclick="answer(0.5)"></button>
                <button class="circle-btn btn-m"  onclick="answer(0)"></button>
                <button class="circle-btn btn-s"  onclick="answer(-0.5)"></button>
                <button class="circle-btn btn-xs" onclick="answer(-1.0)"></button>
                <span class="scale-label disagree">同意しない</span>
            </div>
        </div>
    </div>

    <div id="result-area" class="hidden">
        <p style="font-weight: bold; color: #636e72;">あなたに最適なのは...</p>
        <div id="result-name"></div>
        <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-bottom: 30px;">
            <p id="result-desc" class="description" style="margin-bottom:0;"></p>
        </div>
        <button class="action-btn" onclick="location.reload()" style="background:#b2bec3;">最初からやり直す</button>
    </div>
</div>

<script>
    const questions = [
    { text: "何かを一から作ることが好きだ", weights: { head: 5, general: 1 } },
    { text: "表舞台に立つより、チームが円滑に回るよう支えたい", weights: { head: 3, general: 5 } },
    { text: "デザインや動画制作をするのが好きだ", weights: { pr: 4, head: 1 } },
    { text: "成功のために、地道な準備をコツコツこなすのが苦ではない", weights: { head: 3, general: 3 } },
    { text: "初対面の人や年上の人と話す時も、あまり緊張しない", weights: { external: 4 } },
    { text: "InstagramなどのSNSで、映える写真や加工にこだわりがある", weights: { pr: 5 } },
    { text: "自分のアイデアが形になって、人の喜ぶ顔が見れると嬉しい", weights: { head: 3, pr: 5 } },
    { text: "暇になるよりも、忙しく動き回る方が充実感があり好きだ", weights: { head: 3, general: 5 } },
    { text: "自分の頑張りが、数字や形で目に見える方が好きだ", weights: { external: 3, pr: 3 } },
    { text: "企業と関わり、社会に出て役立つ力を今から身につけたい", weights: { external: 5 } },
    { text: "荷物運びなど、力仕事も苦ではない", weights: { external: 4, general: 3 } } 
];

    const bureauInfo = {
        general: { name: "一般企画局", desc: "お祭りの主役！様々な参加団体のサポートや、インフラ整備など三田祭運営全体を行います。三田祭を自分たちの手で動かす貴重な体験ができます！" },
        pr: { name: "広報宣伝局", desc: "学園祭の顔！デザインやSNS、広報活動を通じて、何万人もの来場者を呼び込みます。デザインや動画編集技術が身に付きます！" },
        head: { name: "本部企画局", desc: "組織の心臓！一人一つ企画を打ち、立案から運営を通して三田祭をより魅力的なものにします。仕事量は多いですが、達成感は一番あります！" },
        external: { name: "渉外局", desc: "社会への窓口！企業との交渉を通じて協賛を得ることで、三田祭運営に必要な資金を集めます。大企業と関わることができます！" }
    };

    let currentIndex = 0;
    let scores = { general: 0, pr: 0, head: 0, external: 0 };

    function startQuiz() {
　　　　 questions.sort(() => Math.random() - 0.5);
        document.getElementById('start-area').classList.add('hidden');
        document.getElementById('quiz-area').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        if (currentIndex < questions.length) {
            document.getElementById('progress').innerText = `Q. ${currentIndex + 1} / ${questions.length}`;
            document.getElementById('question-text').innerText = questions[currentIndex].text;
        } else {
            showResult();
        }
    }

    function answer(multiplier) {
        const currentWeights = questions[currentIndex].weights;
        for (let bureauId in currentWeights) {
            scores[bureauId] += currentWeights[bureauId] * multiplier;
        }
        
        setTimeout(() => {
            currentIndex++;
            showQuestion();
        }, 150);
    }

    function showResult() {
        document.getElementById('quiz-area').classList.add('hidden');
        const resultArea = document.getElementById('result-area');
        resultArea.classList.remove('hidden');

        let winner = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);

        const colors = {
            general: "#008000",
            pr: "#ffff00",
            head: "#ff4500",
            external: "#800080"
        };

        const resultName = document.getElementById('result-name');
        resultName.innerText = bureauInfo[winner].name;
        resultName.style.color = colors[winner];
        
        document.getElementById('result-desc').innerText = bureauInfo[winner].desc;
    }
</script>

</body>
</html>